import icon from '../img/my_projects/icon-icon_visit.svg';

import projectDesk03 from '../img/my_projects/projects-desk-03-min.png';
import projectDesk03_2x from '../img/my_projects/projects-desk-03@2x-min.png';
import projectMob03 from '../img/my_projects/projects-mob-03-min.png';
import projectMob03_2x from '../img/my_projects/projects-mob-03@2x-min.png';
import projectTabl03 from '../img/my_projects/projects-tabl-03-min.png';
import projectTabl03_2x from '../img/my_projects/projects-tabl-03@2x-min.png';

import projectDesk04 from '../img/my_projects/projects-desk-04-min.png';
import projectDesk04_2x from '../img/my_projects/projects-desk-04@2x-min.png';
import projectMob04 from '../img/my_projects/projects-mob-04-min.png';
import projectMob04_2x from '../img/my_projects/projects-mob-04@2x-min.png';
import projectTabl04 from '../img/my_projects/projects-tabl-04-min.png';
import projectTabl04_2x from '../img/my_projects/projects-tabl-04@2x-min.png';

import projectDesk05 from '../img/my_projects/projects-desk-05-min.png';
import projectDesk05_2x from '../img/my_projects/projects-desk-05@2x-min.png';
import projectMob05 from '../img/my_projects/projects-mob-05-min.png';
import projectMob05_2x from '../img/my_projects/projects-mob-05@2x-min.png';
import projectTabl05 from '../img/my_projects/projects-tabl-05-min.png';
import projectTabl05_2x from '../img/my_projects/projects-tabl-05@2x-min.png';

import projectDesk06 from '../img/my_projects/projects-desk-06-min.png';
import projectDesk06_2x from '../img/my_projects/projects-desk-06@2x-min.png';
import projectMob06 from '../img/my_projects/projects-mob-06-min.png';
import projectMob06_2x from '../img/my_projects/projects-mob-06@2x-min.png';
import projectTabl06 from '../img/my_projects/projects-tabl-06-min.png';
import projectTabl06_2x from '../img/my_projects/projects-tabl-06@2x-min.png';

import projectDesk07 from '../img/my_projects/projects-desk-07-min.png';
import projectDesk07_2x from '../img/my_projects/projects-desk-07@2x-min.png';
import projectMob07 from '../img/my_projects/projects-mob-07-min.png';
import projectMob07_2x from '../img/my_projects/projects-mob-07@2x-min.png';
import projectTabl07 from '../img/my_projects/projects-tabl-07-min.png';
import projectTabl07_2x from '../img/my_projects/projects-tabl-07@2x-min.png';

import projectDesk08 from '../img/my_projects/projects-desk-08-min.png';
import projectDesk08_2x from '../img/my_projects/projects-desk-08@2x-min.png';
import projectMob08 from '../img/my_projects/projects-mob-08-min.png';
import projectMob08_2x from '../img/my_projects/projects-mob-08@2x-min.png';
import projectTabl08 from '../img/my_projects/projects-tabl-08-min.png';
import projectTabl08_2x from '../img/my_projects/projects-tabl-08@2x-min.png';

import projectDesk09 from '../img/my_projects/projects-desk-09-min.png';
import projectDesk09_2x from '../img/my_projects/projects-desk-09@2x-min.png';
import projectMob09 from '../img/my_projects/projects-mob-09-min.png';
import projectMob09_2x from '../img/my_projects/projects-mob-09@2x-min.png';
import projectTabl09 from '../img/my_projects/projects-tabl-09-min.png';
import projectTabl09_2x from '../img/my_projects/projects-tabl-09@2x-min.png';

const images = [
  {
    alt: 'Mimino website',
    img: projectDesk03,
    sources: {
      mobile: {
        '1x': projectMob03,
        '2x': projectMob03_2x,
      },
      tablet: {
        '1x': projectTabl03,
        '2x': projectTabl03_2x,
      },
      desktop: {
        '1x': projectDesk03,
        '2x': projectDesk03_2x,
      },
    },
  },
  {
    alt: 'Vyshyvanka vibes Landing Page',
    img: projectDesk04,
    sources: {
      mobile: {
        '1x': projectMob04,
        '2x': projectMob04_2x,
      },
      tablet: {
        '1x': projectTabl04,
        '2x': projectTabl04_2x,
      },
      desktop: {
        '1x': projectDesk04,
        '2x': projectDesk04_2x,
      },
    },
  },
  {
    alt: 'Power pulse webservice',
    img: projectDesk05,
    sources: {
      mobile: {
        '1x': projectMob05,
        '2x': projectMob05_2x,
      },
      tablet: {
        '1x': projectTabl05,
        '2x': projectTabl05_2x,
      },
      desktop: {
        '1x': projectDesk05,
        '2x': projectDesk05_2x,
      },
    },
  },
  {
    alt: 'Chego jewelry website',
    img: projectDesk06,
    sources: {
      mobile: {
        '1x': projectMob06,
        '2x': projectMob06_2x,
      },
      tablet: {
        '1x': projectTabl06,
        '2x': projectTabl06_2x,
      },
      desktop: {
        '1x': projectDesk06,
        '2x': projectDesk06_2x,
      },
    },
  },
  {
    alt: 'Energy flow webservice ',
    img: projectDesk07,
    sources: {
      mobile: {
        '1x': projectMob07,
        '2x': projectMob07_2x,
      },
      tablet: {
        '1x': projectTabl07,
        '2x': projectTabl07_2x,
      },
      desktop: {
        '1x': projectDesk07,
        '2x': projectDesk07_2x,
      },
    },
  },
  {
    alt: 'Starlight studio landing page',
    img: projectDesk08,
    sources: {
      mobile: {
        '1x': projectMob08,
        '2x': projectMob08_2x,
      },
      tablet: {
        '1x': projectTabl08,
        '2x': projectTabl08_2x,
      },
      desktop: {
        '1x': projectDesk08,
        '2x': projectDesk08_2x,
      },
    },
  },
  {
    alt: 'Fruitbox online store',
    img: projectDesk09,
    sources: {
      mobile: {
        '1x': projectMob09,
        '2x': projectMob09_2x,
      },
      tablet: {
        '1x': projectTabl09,
        '2x': projectTabl09_2x,
      },
      desktop: {
        '1x': projectDesk09,
        '2x': projectDesk09_2x,
      },
    },
  },
];

const listProjects = document.querySelector('.project-list');
const loadMoreButton = document.querySelector('.more-projects');

let projectElem = document.querySelector("li.project_card");

loadMoreButton.addEventListener('click', loadProjects);

let loadedProjectsCount = 0;

function loadProjects() {
  const heightProject = projectElem.getBoundingClientRect().height;
  const batchSize = 3;
  const remainingProjects = images.slice(
    loadedProjectsCount,
    loadedProjectsCount + batchSize
  );

  listProjects.insertAdjacentHTML(
    'beforeend',
    createMarkupProjects(remainingProjects)
  );

  let numberScrollSections = 3;
  if((images.length - loadedProjectsCount) < 3) {
    numberScrollSections = images.length - loadedProjectsCount;
  }
  window.scrollBy({
    top: heightProject * numberScrollSections,
    left: 0,
    behavior: "smooth",
  });


  loadedProjectsCount += remainingProjects.length;

  if (loadedProjectsCount >= images.length) {
    loadMoreButton.classList.add('hidden');
  }
}

function createMarkupProjects(images) {
  return images
    .map(
      ({ alt, img, sources: { mobile, tablet, desktop } }) => `
      <li class="project_card">
        <picture>
          <source
            media="(max-width: 767px)"
            srcset="${mobile['1x']} 1x, ${mobile['2x']} 2x"
          />
          <source
            media="(max-width: 1279px)"
            srcset="${tablet['1x']} 1x, ${tablet['2x']} 2x"
          />
          <source
            media="(min-width: 1280px)"
            srcset="${desktop['1x']} 1x, ${desktop['2x']} 2x"
          />
          <img
            class="project-img-card"
            src="${img}"
            alt="${alt}"
            loading="lazy"
          />
        </picture>

        <p class="project-skills">React, JavaScript, Node JS, Git</p>
        <div class="bottom-box">
          <h3 class="project-name">${alt}</h3>
          <a href="https://github.com/VH-str/project-JS-TeamWork-FullStalkers" target="_blanc">
            <button class="visit-button">
              VISIT
              <svg width="24" height="24">
                <use
                  href="${icon}#icon-icon_visit"
                ></use>
              </svg>
            </button>
          </a>
        </div>
      </li>`
    )
    .join('');
}
